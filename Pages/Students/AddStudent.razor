@page "/addstudent"
@using Linq_Assignment_2.Models
@using Linq_Assignment_2.Data

@inject AppDbContext context;

<h3>Add Student</h3>

 <EditForm Model="@student" OnValidSubmit="@addStudent">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="SName">Name:</label>
        <InputText id="SName" @bind-Value="student.SName" class="form-control" />
        <ValidationMessage For="@(() => student.SName)" />
    </div>
    <br />

    <div class="form-group">
        <label for="Major">Major:</label>
        <InputText id="Major" @bind-Value="student.Major" class="form-control" />
        <ValidationMessage For="@(() => student.Major)" />
    </div>
    <br />

    <div class="form-group">
        <label for="Standing">Standing:</label>
        <InputText id="Standing" @bind-Value="student.Standing" class="form-control" />
        <ValidationMessage For="@(() => student.Standing)" />
    </div>
    <br />

    <div class="form-group">
        <label for="Birthdate">Birthdate:</label>
        <InputDate id="Birthdate" @bind-Value="student.Birthdate" class="form-control" min="1990-01-01" max="@DateTime.Now.ToString("yyyy-MM-dd")" />
        <ValidationMessage For="@(() => student.Birthdate)" />
    </div>
    <br />

    <button type="submit" class="btn btn-primary">Save</button>
</EditForm> 
@code {
    private Student student =  new Student();

    private void addStudent()
    {
        context.Students.Add(student);
        context.SaveChanges();
        student = new Student();
    }

    //     List<Student> students = new List<Student>
    // {

    //     new Student { Sid = 4, SName = "Alice Williams", Major = "Computer Science", Standing = "Freshman", Birthdate = new DateOnly(2000, 7, 5) },
    //     new Student { Sid = 5, SName = "Charlie Brown", Major = "Electrical Engineering", Standing = "Senior", Birthdate = new DateOnly(1992, 12, 18) },
    //     new Student { Sid = 6, SName = "Eva Davis", Major = "Mechanical Engineering", Standing = "Junior", Birthdate = new DateOnly(1996, 10, 3) },
    //     new Student { Sid = 7, SName = "Mike Miller", Major = "Computer Science", Standing = "Senior", Birthdate = new DateOnly(1991, 2, 28) },
    //     new Student { Sid = 8, SName = "Sophie Taylor", Major = "Electrical Engineering", Standing = "Sophomore", Birthdate = new DateOnly(1998, 6, 14) },
    //     new Student { Sid = 9, SName = "Jack Wilson", Major = "Mechanical Engineering", Standing = "Freshman", Birthdate = new DateOnly(2001, 9, 9) },
    //     new Student { Sid = 10, SName = "Olivia Clark", Major = "Computer Science", Standing = "Junior", Birthdate = new DateOnly(1994, 11, 20) }
    // };

    // To add List Of Students
    // protected override async Task OnInitializedAsync()
    // {
    //     context.Students.AddRange(students);
    //     context.SaveChanges();
    // }
}
